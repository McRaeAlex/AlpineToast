{"version":3,"file":"index.es.js","sources":["../src/utils.ts","../src/configs.ts","../src/index.ts"],"sourcesContent":["\nexport function maybeParseClasses(maybeString: string | undefined) {\n    if (typeof maybeString === 'string' && maybeString.length > 0) {\n        return maybeString.split(' ');\n    }\n    return undefined;\n}","import { AlpineToastConfig } from './index';\n\n/**\n * TailWindCSSConfig is a example configuration for TailwindCSS when using the \n * AlpineToast library\n */\nexport const TailWindCSSConfig: AlpineToastConfig = {\n containerClasses: \"absolute max-w-16 right-5 bottom-5 overflow-x-hidden space-y-2\",\n toastClasses: \"p-4 bg-blue-300 text-lg shadow-lg transition-all duration-1000 transform translate-x-full\",\n onShowClasses: \"translate-x-full\",\n onHideClasses: \"translate-x-full\",\n};","import * as JSON5 from 'json5'; \nimport {maybeParseClasses} from './utils';\n\ninterface AlpineToastConfig {\n  toastContainer?: HTMLElement;\n  containerClasses?: string,\n  toastClasses?: string,\n  onShowClasses?: string;\n  onHideClasses?: string;\n  delayRemoval?: number;\n  duration?: number;\n}\n\nclass AlpineToast {\n  container: HTMLElement;\n\n  containerClasses: string[];\n  toastClasses: string[];\n  onShowClasses: string[];\n  onHideClasses: string[];\n\n  duration: number;\n  delayRemoval: number;\n\n  constructor(config: AlpineToastConfig) {\n    this.containerClasses = maybeParseClasses(config.containerClasses) || [];\n    this.toastClasses = maybeParseClasses(config.toastClasses) || [];\n    this.onShowClasses = maybeParseClasses(config.onShowClasses) || [];\n    this.onHideClasses = maybeParseClasses(config.onHideClasses) || [];\n\n    this.delayRemoval = config.delayRemoval || 1000;\n    this.duration = config.duration || 5000;\n\n    this.container = config.toastContainer || this.defaultContainer();\n    document.body.appendChild(this.container);\n  }\n\n  private defaultContainer() {\n    let container = document.createElement(\"div\");\n    container.classList.add(...this.containerClasses);\n    return container;\n  }\n\n  /**\n   * getToasts retrieves all the elements which become toasts\n   */\n  private getToasts() {\n    return document.querySelectorAll(\"[x-toast]\");\n  }\n\n  /**\n   * makeToasts converts the elements into toasts\n   */\n  start() {\n    const toasts = this.getToasts();\n\n    toasts.forEach((elem) => {\n      // Get the args passed into the element\n      const args = JSON5.parse(elem.getAttribute('x-toast') || '{}');\n      this.makeToast(elem, args);\n    });\n  }\n\n  /**\n   * makeToast turns a signle element into a toast\n   * @param elem The element to become the toast\n   */\n  makeToast(elem: Element, args: AlpineToastConfig) {\n    let duration = args.duration || this.duration; // Default or use the passed in duration\n    const removeDelay = args.delayRemoval || this.delayRemoval;\n    const toastClasses = maybeParseClasses(args.toastClasses) || this.toastClasses;\n    const onHideClasses = maybeParseClasses(args.onHideClasses) || this.onHideClasses;\n    const onShowClasses = maybeParseClasses(args.onShowClasses) || this.onShowClasses;\n\n    // Stop the toast from being created more than once\n    elem.removeAttribute('x-toast');\n\n    // Add the default classes\n    elem.classList.add(...toastClasses);\n\n    // Countdown the timer until it should disappear\n    const update_timer = setInterval(() => {\n      if (!elem.matches(\":hover\")) {\n        duration = duration - 100;\n      }\n\n      if (duration <= 0) {\n        // Stop updating the timer\n        clearInterval(update_timer);\n\n        // Toggle the classes\n        if (onHideClasses !== []) {\n          onHideClasses.forEach((cls) => elem.classList.toggle(cls));\n        }\n        // Remove the element from the dom\n        setTimeout(() => elem.remove(), removeDelay);\n      }\n    }, 100);\n\n    // Toggle some class\n    setTimeout(() => {\n    if (onShowClasses !== []) {\n      onShowClasses.forEach((cls) => elem.classList.toggle(cls));\n    }\n    }, 500);\n    // Add the element to the toast container for styling\n    this.container.appendChild(elem);\n  }\n\n  newToast(text: string, args: AlpineToastConfig = {}) {\n    const div = document.createElement('div');\n    div.innerHTML = text;\n    this.makeToast(div, args);\n  }\n}\n\nexport {AlpineToast, AlpineToastConfig};\nexport {TailWindCSSConfig} from './configs';"],"names":["JSON5.parse"],"mappings":";;SACgB,iBAAiB,CAAC,WAA+B;IAC7D,IAAI,OAAO,WAAW,KAAK,QAAQ,IAAI,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE;QAC3D,OAAO,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;KACjC;IACD,OAAO,SAAS,CAAC;AACrB;;ACJA;;;;IAIa,iBAAiB,GAAsB;IACnD,gBAAgB,EAAE,gEAAgE;IAClF,YAAY,EAAE,2FAA2F;IACzG,aAAa,EAAE,kBAAkB;IACjC,aAAa,EAAE,kBAAkB;;;;ICchC,qBAAY,MAAyB;QACnC,IAAI,CAAC,gBAAgB,GAAG,iBAAiB,CAAC,MAAM,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAC;QACzE,IAAI,CAAC,YAAY,GAAG,iBAAiB,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;QACjE,IAAI,CAAC,aAAa,GAAG,iBAAiB,CAAC,MAAM,CAAC,aAAa,CAAC,IAAI,EAAE,CAAC;QACnE,IAAI,CAAC,aAAa,GAAG,iBAAiB,CAAC,MAAM,CAAC,aAAa,CAAC,IAAI,EAAE,CAAC;QAEnE,IAAI,CAAC,YAAY,GAAG,MAAM,CAAC,YAAY,IAAI,IAAI,CAAC;QAChD,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC,QAAQ,IAAI,IAAI,CAAC;QAExC,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC,cAAc,IAAI,IAAI,CAAC,gBAAgB,EAAE,CAAC;QAClE,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;KAC3C;IAEO,sCAAgB,GAAxB;;QACE,IAAI,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAC9C,CAAA,KAAA,SAAS,CAAC,SAAS,EAAC,GAAG,WAAI,IAAI,CAAC,gBAAgB,EAAE;QAClD,OAAO,SAAS,CAAC;KAClB;;;;IAKO,+BAAS,GAAjB;QACE,OAAO,QAAQ,CAAC,gBAAgB,CAAC,WAAW,CAAC,CAAC;KAC/C;;;;IAKD,2BAAK,GAAL;QAAA,iBAQC;QAPC,IAAM,MAAM,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;QAEhC,MAAM,CAAC,OAAO,CAAC,UAAC,IAAI;;YAElB,IAAM,IAAI,GAAGA,KAAW,CAAC,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,IAAI,IAAI,CAAC,CAAC;YAC/D,KAAI,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;SAC5B,CAAC,CAAC;KACJ;;;;;IAMD,+BAAS,GAAT,UAAU,IAAa,EAAE,IAAuB;;QAC9C,IAAI,QAAQ,GAAG,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC;QAC9C,IAAM,WAAW,GAAG,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,YAAY,CAAC;QAC3D,IAAM,YAAY,GAAG,iBAAiB,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,IAAI,CAAC,YAAY,CAAC;QAC/E,IAAM,aAAa,GAAG,iBAAiB,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,IAAI,CAAC,aAAa,CAAC;QAClF,IAAM,aAAa,GAAG,iBAAiB,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,IAAI,CAAC,aAAa,CAAC;;QAGlF,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;;QAGhC,CAAA,KAAA,IAAI,CAAC,SAAS,EAAC,GAAG,WAAI,YAAY,EAAE;;QAGpC,IAAM,YAAY,GAAG,WAAW,CAAC;YAC/B,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE;gBAC3B,QAAQ,GAAG,QAAQ,GAAG,GAAG,CAAC;aAC3B;YAED,IAAI,QAAQ,IAAI,CAAC,EAAE;;gBAEjB,aAAa,CAAC,YAAY,CAAC,CAAC;;gBAG5B,IAAI,aAAa,KAAK,EAAE,EAAE;oBACxB,aAAa,CAAC,OAAO,CAAC,UAAC,GAAG,IAAK,OAAA,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,GAAG,CAAC,GAAA,CAAC,CAAC;iBAC5D;;gBAED,UAAU,CAAC,cAAM,OAAA,IAAI,CAAC,MAAM,EAAE,GAAA,EAAE,WAAW,CAAC,CAAC;aAC9C;SACF,EAAE,GAAG,CAAC,CAAC;;QAGR,UAAU,CAAC;YACX,IAAI,aAAa,KAAK,EAAE,EAAE;gBACxB,aAAa,CAAC,OAAO,CAAC,UAAC,GAAG,IAAK,OAAA,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,GAAG,CAAC,GAAA,CAAC,CAAC;aAC5D;SACA,EAAE,GAAG,CAAC,CAAC;;QAER,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;KAClC;IAED,8BAAQ,GAAR,UAAS,IAAY,EAAE,IAA4B;QAA5B,qBAAA,EAAA,SAA4B;QACjD,IAAM,GAAG,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAC1C,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;KAC3B;IACH,kBAAC;AAAD,CAAC;;;;"}