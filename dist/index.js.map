{"version":3,"file":"index.js","sources":["../src/index.ts"],"sourcesContent":["interface AlpineToastConfig {\n  toastContainer?: HTMLElement;\n  onShowClasses?: string;\n  onHideClasses?: string;\n  delayRemoval?: number;\n  duration?: number;\n}\n\nclass AlpineToast {\n  container: HTMLElement;\n\n  onShowClasses: string;\n  onHideClasses: string;\n\n  duration: number;\n  delayRemoval: number;\n\n  constructor(config: AlpineToastConfig) {\n    this.onShowClasses = config.onShowClasses || \"\";\n    this.onHideClasses = config.onHideClasses || \"\";\n\n    this.delayRemoval = config.delayRemoval || 1000;\n    this.duration = config.duration || 5000;\n\n    this.container = config.toastContainer || this.defaultContainer();\n    document.body.appendChild(this.container);\n  }\n\n  private defaultContainer() {\n    let container = document.createElement(\"div\");\n    container.setAttribute(\"id\", \"alpine-toast-container\");\n    container.style.position = \"absolute\";\n    container.style.right = \"10px\";\n    container.style.bottom = \"10px\";\n    container.style.overflow = \"hidden\";\n    return container;\n  }\n\n  /**\n   * getToasts retrieves all the elements which become toasts\n   */\n  private getToasts() {\n    return document.querySelectorAll(\"[x-toast]\");\n  }\n\n  /**\n   * makeToasts converts the elements into toasts\n   */\n  start() {\n    const toasts = this.getToasts();\n\n    toasts.forEach((elem) => {\n      this.makeToast(elem);\n    });\n  }\n\n  /**\n   * makeToast turns a signle element into a toast\n   * @param elem The element to become the toast\n   */\n  makeToast(elem: Element) {\n    let duration = this.duration; // Default or use the passed in duration\n    // TODO: Configuration for the toast goes here\n\n    // Stop the toast from being created more than once\n    elem.removeAttribute('x-toast');\n    // Countdown the timer until it should disappear\n    const update_timer = setInterval(() => {\n      if (!elem.matches(\":hover\")) {\n        duration = duration - 100;\n      }\n\n      if (duration <= 0) {\n        // Stop updating the timer\n        clearInterval(update_timer);\n\n        // Toogle a class\n        if (this.onHideClasses !== \"\") {\n          elem.classList.toggle(this.onHideClasses);\n        }\n        // Remove the element from the dom\n        setTimeout(() => elem.remove(), this.delayRemoval);\n      }\n    }, 100);\n\n    // Toggle some class\n    setTimeout(() => {\n    if (this.onShowClasses !== \"\") {\n      elem.classList.toggle(this.onShowClasses);\n    }\n    }, 500);\n    // Add the element to the toast container for styling\n    this.container.appendChild(elem);\n  }\n\n  new(text: string) {\n    const div = document.createElement('div');\n    div.innerHTML = text;\n    this.makeToast(div);\n  }\n}\n\nexport default AlpineToast;\n"],"names":[],"mappings":";;;IAiBE,qBAAY,MAAyB;QACnC,IAAI,CAAC,aAAa,GAAG,MAAM,CAAC,aAAa,IAAI,EAAE,CAAC;QAChD,IAAI,CAAC,aAAa,GAAG,MAAM,CAAC,aAAa,IAAI,EAAE,CAAC;QAEhD,IAAI,CAAC,YAAY,GAAG,MAAM,CAAC,YAAY,IAAI,IAAI,CAAC;QAChD,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC,QAAQ,IAAI,IAAI,CAAC;QAExC,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC,cAAc,IAAI,IAAI,CAAC,gBAAgB,EAAE,CAAC;QAClE,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;KAC3C;IAEO,sCAAgB,GAAxB;QACE,IAAI,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAC9C,SAAS,CAAC,YAAY,CAAC,IAAI,EAAE,wBAAwB,CAAC,CAAC;QACvD,SAAS,CAAC,KAAK,CAAC,QAAQ,GAAG,UAAU,CAAC;QACtC,SAAS,CAAC,KAAK,CAAC,KAAK,GAAG,MAAM,CAAC;QAC/B,SAAS,CAAC,KAAK,CAAC,MAAM,GAAG,MAAM,CAAC;QAChC,SAAS,CAAC,KAAK,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACpC,OAAO,SAAS,CAAC;KAClB;;;;IAKO,+BAAS,GAAjB;QACE,OAAO,QAAQ,CAAC,gBAAgB,CAAC,WAAW,CAAC,CAAC;KAC/C;;;;IAKD,2BAAK,GAAL;QAAA,iBAMC;QALC,IAAM,MAAM,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;QAEhC,MAAM,CAAC,OAAO,CAAC,UAAC,IAAI;YAClB,KAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;SACtB,CAAC,CAAC;KACJ;;;;;IAMD,+BAAS,GAAT,UAAU,IAAa;QAAvB,iBAiCC;QAhCC,IAAI,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;;;QAI7B,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;;QAEhC,IAAM,YAAY,GAAG,WAAW,CAAC;YAC/B,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE;gBAC3B,QAAQ,GAAG,QAAQ,GAAG,GAAG,CAAC;aAC3B;YAED,IAAI,QAAQ,IAAI,CAAC,EAAE;;gBAEjB,aAAa,CAAC,YAAY,CAAC,CAAC;;gBAG5B,IAAI,KAAI,CAAC,aAAa,KAAK,EAAE,EAAE;oBAC7B,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,KAAI,CAAC,aAAa,CAAC,CAAC;iBAC3C;;gBAED,UAAU,CAAC,cAAM,OAAA,IAAI,CAAC,MAAM,EAAE,GAAA,EAAE,KAAI,CAAC,YAAY,CAAC,CAAC;aACpD;SACF,EAAE,GAAG,CAAC,CAAC;;QAGR,UAAU,CAAC;YACX,IAAI,KAAI,CAAC,aAAa,KAAK,EAAE,EAAE;gBAC7B,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,KAAI,CAAC,aAAa,CAAC,CAAC;aAC3C;SACA,EAAE,GAAG,CAAC,CAAC;;QAER,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;KAClC;IAED,sBAAA,KAAG,CAAA,GAAH,UAAI,IAAY;QACd,IAAM,GAAG,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAC1C,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;KACrB;IACH,kBAAC;AAAD,CAAC;;;;"}